<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How I update the GitHub pages for my projects with Sphinx documentation &#8212; Pete Jemian 2023 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/agogo.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to Pete Jemian’s GitHub page!" href="index.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">Pete Jemian 2023 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="index.html" title="Welcome to Pete Jemian’s GitHub page!"
             accesskey="P">previous</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="how-i-update-the-github-pages-for-my-projects-with-sphinx-documentation">
<span id="gh-pages"></span><h1>How I update the GitHub pages for my projects with Sphinx documentation<a class="headerlink" href="#how-i-update-the-github-pages-for-my-projects-with-sphinx-documentation" title="Permalink to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Pete R. Jemian</p>
</dd>
<dt class="field-even">url<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="http://prjemian.github.io">http://prjemian.github.io</a></p>
</dd>
<dt class="field-odd">this<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="http://prjemian.github.io/gh-pages.html">http://prjemian.github.io/gh-pages.html</a></p>
</dd>
<dt class="field-even">see<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://help.github.com/articles/creating-project-pages-manually">https://help.github.com/articles/creating-project-pages-manually</a></p>
</dd>
</dl>
<p>Here are the steps I follow (only slight difference from github’s):</p>
<ol class="arabic simple">
<li><p>build the Sphinx docs in the project locally</p></li>
<li><p>copy the <em>html</em> directory contents somewhere else</p></li>
<li><p>switch to the <em>gh-pages</em> branch</p></li>
<li><p>remove all git content</p></li>
<li><p>copy contents of that <em>html</em> dir back to the branch</p></li>
<li><p>commit all the new files</p></li>
<li><p>push to github</p></li>
<li><p>switch back to the <em>master</em> branch</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The instructions to publish User &amp; Organization Pages
are shorter and simpler. <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>
“Content from the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch will be used to build
and publish your GitHub Pages site.”
This means the HTML is published on the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch, alongside
any source code such as <code class="docutils literal notranslate"><span class="pre">.rst</span></code>) for the page(s).</p>
<p>For a Sphinx build, these are the steps I use to publish the user docs page:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">clean</span> <span class="n">html</span>
<span class="n">pushd</span> <span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span>
<span class="n">tar</span> <span class="n">cf</span> <span class="o">-</span> <span class="o">.</span> <span class="o">|</span> <span class="p">(</span><span class="n">cd</span> <span class="o">../..</span> <span class="o">&amp;&amp;</span> <span class="n">tar</span> <span class="n">xf</span> <span class="o">-</span><span class="p">)</span>
<span class="n">popd</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
</pre></div>
</div>
<p>and then push to the <code class="docutils literal notranslate"><span class="pre">origin</span> <span class="pre">master</span></code>.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://help.github.com/articles/user-organization-and-project-pages#user--organization-pages">User &amp; Org Pages</a></p>
</aside>
</aside>
</div>
<section id="build-the-sphinx-docs-in-the-project-locally">
<h2>build the Sphinx docs in the project locally<a class="headerlink" href="#build-the-sphinx-docs-in-the-project-locally" title="Permalink to this heading">¶</a></h2>
<p>for my projects, the docs are in the “docs” subdirectory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd docs
$ make clean
</pre></div>
</div>
<p>Before proceeding to build the html pages, it is useful to make a
modification <a class="footnote-reference brackets" href="#id4" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> to the Sphinx Makefile so that GitHub
pages will not try to render the pages using jekyll.  Without this,
the Sphinx document theme will not be able to make the pages look
right.  With this modification in place, proceed to build the html
documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make html
</pre></div>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>add <code class="docutils literal notranslate"><span class="pre">.nojekyll</span></code> file to HTML directory root
(<a class="reference external" href="https://github.com/prjemian/prjemian.github.io/commit/4b2bddc61a6e294ae8df2b094e6966e4b899d8d6">example</a>)</p>
</aside>
</aside>
</section>
<section id="copy-the-html-directory-contents-somewhere-else">
<h2>copy the <em>html</em> directory contents somewhere else<a class="headerlink" href="#copy-the-html-directory-contents-somewhere-else" title="Permalink to this heading">¶</a></h2>
<p>I use <em>tar</em>, it is simple (proceeding from previous point):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd build/html
$ tar czf /tmp/html.tgz .
</pre></div>
</div>
</section>
<section id="switch-to-the-gh-pages-branch">
<h2>switch to the <em>gh-pages</em> branch<a class="headerlink" href="#switch-to-the-gh-pages-branch" title="Permalink to this heading">¶</a></h2>
<p>first, move back to the project’s root directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd ../../..
</pre></div>
</div>
<p>If the project does not have a <em>gh-pages</em> branch, it should be created
with the special command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout --orphan gh-pages
    Switched to a new branch &#39;gh-pages&#39;
</pre></div>
</div>
<p>You only need to do this once per project.
Check <a class="reference external" href="https://github.com/prjemian/cmd_response">https://github.com/prjemian/cmd_response</a> <a class="footnote-reference brackets" href="#id6" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> under branches and
it will tell you if such a branch exists.  For <em>cmd_response</em>, that exists.
If the <em>gh-pages</em> branch exists, just use this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout gh-pages
Branch gh-pages set up to track remote branch gh-pages from origin.
</pre></div>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">3</a><span class="fn-bracket">]</span></span>
<p>the general pattern for the project URL is:
<a class="reference external" href="https://github.com">https://github.com</a>/&lt;username&gt;/&lt;projectname&gt;</p>
<p>The docs will be published to:
<a class="reference external" href="http:/">http:/</a>/&lt;username&gt;.github.io/&lt;projectname&gt;</p>
</aside>
</aside>
</section>
<section id="remove-all-git-content">
<h2>remove all git content<a class="headerlink" href="#remove-all-git-content" title="Permalink to this heading">¶</a></h2>
<p>Confirm you are on the gh-pages branch if you need the confidence builder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git branch
* gh-pages
  master
</pre></div>
</div>
<p>The “*” confirms the <em>gh-pages</em> branch is checked out now.</p>
<p>This next command looks dangerous.  Fear not.
It just cleans out the project content from
the documentation branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git rm -rf .
rm &#39;.buildinfo&#39;
rm &#39;.nojekyll&#39;
rm &#39;_modules/index.html&#39;
...
</pre></div>
</div>
<p>All that should remain is the <em>.git</em> directory.  Don’t delete that!</p>
<p>At this point, there may remain some other files and directories that
were not in git version control.  These need to be deleted directly
(not with git but with normal delete commands).  Check for them.
Likely ones include docs, dist, build, perhaps others.  For me:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls -lAFg
total 12
drwxr-xr-x 3 mint14 4096 Mar 24 20:30 docs/
drwxr-xr-x 8 mint14 4096 Mar 24 20:30 .git/
$ /bin/rm -rf docs
$ ls -lAFg
total 4
drwxr-xr-x 8 mint14 4096 Mar 24 20:30 .git/
</pre></div>
</div>
<p>All that should remain <em>now</em> is the <em>.git</em> directory.</p>
</section>
<section id="copy-contents-of-that-html-dir-back-to-the-branch">
<h2>copy contents of that html dir back to the branch<a class="headerlink" href="#copy-contents-of-that-html-dir-back-to-the-branch" title="Permalink to this heading">¶</a></h2>
<p>We used tar before to copy our documentation.  We bring it back now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tar xzf /tmp/html.tgz
</pre></div>
</div>
</section>
<section id="commit-all-the-new-files">
<h2>commit all the new files<a class="headerlink" href="#commit-all-the-new-files" title="Permalink to this heading">¶</a></h2>
<p>Put all the new documentation into git version control:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git add .
$ git commit -a -m &quot;publish the docs&quot;
</pre></div>
</div>
</section>
<section id="push-to-github">
<h2>push to github<a class="headerlink" href="#push-to-github" title="Permalink to this heading">¶</a></h2>
<p>The changes are not published until you push the changeset back to github:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git push origin gh-pages
</pre></div>
</div>
<p>and enter credentials as requested.  Your documentation should
appear at <a class="reference external" href="http://prjemian.github.io/cmd_response">http://prjemian.github.io/cmd_response</a> right away if they
have already been posted before.  For a brand new project, it might
take up to 10 minutes.</p>
</section>
<section id="switch-back-to-the-master-branch">
<h2>switch back to the <em>master</em> branch<a class="headerlink" href="#switch-back-to-the-master-branch" title="Permalink to this heading">¶</a></h2>
<p>Don’t forget to switch your working directory back to the <em>master</em>
(or other) branch once you have successfully pushed the docs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout master
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How I update the GitHub pages for my projects with Sphinx documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#build-the-sphinx-docs-in-the-project-locally">build the Sphinx docs in the project locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copy-the-html-directory-contents-somewhere-else">copy the <em>html</em> directory contents somewhere else</a></li>
<li class="toctree-l2"><a class="reference internal" href="#switch-to-the-gh-pages-branch">switch to the <em>gh-pages</em> branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remove-all-git-content">remove all git content</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copy-contents-of-that-html-dir-back-to-the-branch">copy contents of that html dir back to the branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commit-all-the-new-files">commit all the new files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#push-to-github">push to github</a></li>
<li class="toctree-l2"><a class="reference internal" href="#switch-back-to-the-master-branch">switch back to the <em>master</em> branch</a></li>
</ul>
</li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="index.html" title="Welcome to Pete Jemian’s GitHub page!"
              >previous</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/gh-pages.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-2023, Pete Jemian.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>